{"version":3,"file":"the-panel.js","sourceRoot":"","sources":["../../../ui-src/ui/the-panel.ts"],"names":[],"mappings":"AAEA,MAAM,OAAO,QAAS,SAAQ,WAAW;IACvC;QACE,KAAK,EAAE,CAAC;QACR,MAAM,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG;;;;;;;;;;;;;;;;;;;;;;;EAuBnB,CAAC;QAEC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,gBAAgB,CAAC,OAAO,EAAE,GAAG,EAAE;YACzD,MAAM,MAAM,GAAqB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAC7D,MAAM,SAAS,GAAwB,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YACtE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC;YAE9C,MAAM,aAAa,GAAG,IAAI,WAAW,CAAC,aAAa,EAAE;gBACnD,MAAM,EAAE;oBACN,IAAI,EAAE,MAAM,CAAC,KAAK;oBAClB,OAAO,EAAE,SAAS,CAAC,KAAK;iBACzB;gBACD,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YAEH,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;YAElC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;YAClB,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,cAAc;QAChB,OAAO,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;IAC3C,CAAC;IAED,IAAI,OAAO;QACT,MAAM,GAAG,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAwB,CAAC;QACrE,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE;YAChC,OAAO;gBACL,EAAE,EAAE,EAAE,CAAC,EAAE;gBACT,IAAI,EAAE,EAAE,CAAC,IAAI;gBACb,OAAO,EAAE,EAAE,CAAC,OAAO;aACpB,CAAC;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,OAAO,CAAC,KAAsD;QAChE,KAAK,MAAM,EAAE,IAAI,KAAK,EAAE,CAAC;YACvB,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;QAC7C,CAAC;IACH,CAAC;IAED,SAAS,CAAC,IAAY,EAAE,OAAe,EAAE,EAAW;QAClD,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QACzD,aAAa,CAAC,IAAI,GAAG,SAAS,CAAC;QAC/B,aAAa,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QACzC,aAAa,CAAC,YAAY,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAC/C,aAAa,CAAC,YAAY,CACxB,IAAI,EACJ,EAAE,IAAI,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,EAAE,CAC3C,CAAC;QAEF,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;IAClC,CAAC;CACF","sourcesContent":["import { ACritic } from \"./a-critic.js\";\n\nexport class ThePanel extends HTMLElement {\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: \"open\" });\n    root.innerHTML = `\n\t  <style>\n\t\t:host {\n\t\t  display: block;\n      height: min-content;\n      box-shadow: var(--shadow-1);\n      padding: var(--size-2);\n      border-radius: var(--radius-2);\n      background-color: var(--purple-11);\n\t\t}\n\n\t\tdiv.config {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n      gap: var(--size-1);\n\t\t}\n\t  </style>\n\t  <slot name=\"critics\"></slot>\n\t  <div class=\"config\">\n\t\t<input type=\"text\" id=\"name\" placeholder=\"The name of the persona\" />\n\t\t<textarea type=\"text\" id=\"persona\" placeholder=\"Describe the persona you this agent to take on\"></textarea>\n\t\t<button id=\"add\">Add Critic</button>\n\t  </div>\n\t`;\n\n    root.querySelector(\"#add\")?.addEventListener(\"click\", () => {\n      const nameEl = <HTMLInputElement>root.querySelector(\"#name\");\n      const personaEl = <HTMLTextAreaElement>root.querySelector(\"#persona\");\n      this.addCritic(nameEl.value, personaEl.value);\n\n      const critiqueEvent = new CustomEvent(\"criticadded\", {\n        detail: {\n          name: nameEl.value,\n          persona: personaEl.value,\n        },\n        composed: true,\n      });\n\n      this.dispatchEvent(critiqueEvent);\n\n      nameEl.value = \"\";\n      personaEl.value = \"\";\n    });\n  }\n\n  get criticElements() {\n    return this.querySelectorAll(\"a-critic\");\n  }\n\n  get critics() {\n    const els = this.querySelectorAll(\"a-critic\") as NodeListOf<ACritic>;\n    return Array.from(els).map((el) => {\n      return {\n        id: el.id,\n        name: el.name,\n        persona: el.persona,\n      };\n    });\n  }\n\n  set critics(value: { name: string; persona: string; id: string }[]) {\n    for (const el of value) {\n      this.addCritic(el.name, el.persona, el.id);\n    }\n  }\n\n  addCritic(name: string, persona: string, id?: string) {\n    const criticElement = document.createElement(\"a-critic\");\n    criticElement.slot = \"critics\";\n    criticElement.setAttribute(\"name\", name);\n    criticElement.setAttribute(\"persona\", persona);\n    criticElement.setAttribute(\n      \"id\",\n      id == undefined ? crypto.randomUUID() : id,\n    );\n\n    this.appendChild(criticElement);\n  }\n}\n"]}